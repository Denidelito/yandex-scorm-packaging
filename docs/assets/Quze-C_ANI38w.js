import{_ as E,u as N,c as u,r as y,o as d,a as _,b as e,l as n,t as S,F as U,m as j,q as F,v as M,s as O,d as R,f as A,x as m,n as h,p as L,g as T}from"./index-DO_ee_GA.js";import{S as G}from"./Speech-DyRS80ZA.js";const t=l=>(L("data-v-ad85207d"),l=l(),T(),l),H={class:"quze"},J={class:"quze__content-left"},K={key:0},W={class:"quze__question"},X=t(()=>e("div",{class:"quze__question__icon"}," ? ",-1)),Y={class:"quze__question__container"},Z={class:"quze__text quze__text-medium"},ee=t(()=>e("p",{class:"quze__text quze__text-small"},"Выбери один вариант.",-1)),se={class:"quze__answer-container"},te=["id","value"],ne=["for"],ae=["disabled"],oe={key:1},re={class:"quze__nav"},le={class:"quze__content-right"},ue=t(()=>e("div",{class:"quze__progress-title"}," Динамика группы ",-1)),ie={class:"quze__progress-container"},ce={class:"quze__progress-item"},de={class:"quze__progress"},_e=t(()=>e("span",{class:"number"},"+ 1",-1)),ve=t(()=>e("span",{class:"number"},"+ 1",-1)),me=t(()=>e("span",{class:"number"},"+ 1",-1)),he=[_e,ve,me],pe=t(()=>e("p",null,"Доверие",-1)),ge={class:"quze__progress-item"},qe={class:"quze__progress"},fe=t(()=>e("span",{class:"number"},"+ 1",-1)),be=t(()=>e("span",{class:"number"},"+ 1",-1)),ze=t(()=>e("span",{class:"number"},"+ 1",-1)),we=[fe,be,ze],ye=t(()=>e("p",null,"Вовлеченность",-1)),ke={class:"quze__progress-item"},xe={class:"quze__progress"},Ie=t(()=>e("span",{class:"number"},"+ 1",-1)),Se=t(()=>e("span",{class:"number"},"+ 1",-1)),Ae=t(()=>e("span",{class:"number"},"+ 1",-1)),Ce=[Ie,Se,Ae],Ve=t(()=>e("p",null,"Эффективность",-1)),Qe={__name:"Quze",props:{name:{type:String,required:!0},questions:{type:Array,required:!0},resultMessage:{type:Array,required:!1},parameters:{type:Object,required:!0,default:()=>({engagement:0,interest:0,understanding:0})},store:{type:Object,required:!0,default:()=>({questionIndex:0,selectedAnswer:null,feedbackVisible:!1,answers:[]})}},setup(l){const g=N(),o=l;let c=u({get:()=>o.store.questionIndex,set:s=>{o.store.questionIndex=s}}),r=u({get:()=>o.store.selectedAnswer,set:s=>{o.store.selectedAnswer=s}}),v=u({get:()=>o.store.feedbackVisible,set:s=>{o.store.feedbackVisible=s}}),p=u({get:()=>o.store.answers,set:s=>{o.store.answers=s}}),a=u(()=>o.parameters);const k=u(()=>o.questions[c.value]),q=s=>s>=80?"green":s>=50?"yellow":"red",C=u(()=>q(a.value.interest/24*100)),V=u(()=>q(a.value.engagement/33*100)),Q=u(()=>q(a.value.interest/35*100));let f=y(!1),b=y(!1),z=y(!1);const $=u(()=>[...r.value.feedback]),D=()=>{const s=r.value;for(let i of s.parameter)a.value[i]+=1,i==="engagement"&&(b.value=!0),i==="interest"&&(f.value=!0),i==="understanding"&&(z.value=!0);setTimeout(()=>{f.value=!1,b.value=!1,z.value=!1},1500),v.value=!0,p.value.push(s),g.setCustomData("quzeParameters",a.value),g.setCustomData(o.name,{questionIndex:c.value,selectedAnswer:r.value,feedbackVisible:v.value,answers:p.value})},P=()=>{r.value=null,v.value=!1,c.value+=1},B=()=>{for(let s of p.value)for(let i of s.parameter)a.value[i]-=1;r.value=null,v.value=!1,c.value=0,p.value=[],g.setCustomData("quzeParameters",a.value),g.setCustomData(o.name,{questionIndex:c.value,selectedAnswer:r.value,feedbackVisible:v.value,answers:p.value})};return(s,i)=>(d(),_("div",H,[e("div",J,[n(v)?(d(),_("div",oe,[R(G,{"speech-data":$.value},null,8,["speech-data"]),e("div",re,[n(c)+1!==l.questions.length?(d(),_("button",{key:0,class:"quze__btn",onClick:P}," Продолжить ")):A("",!0),n(c)+1===l.questions.length?(d(),_("button",{key:1,class:"quze__btn",onClick:B}," Поменять ответы ")):A("",!0)])])):(d(),_("div",K,[e("div",W,[X,e("div",Y,[e("p",Z,S(k.value.question),1),ee])]),e("div",se,[(d(!0),_(U,null,j(k.value.Answer,(x,w)=>(d(),_("div",{class:"quze__answer",key:l.name+w},[F(e("input",{type:"radio",id:`answer-${l.name+w}`,value:x,"onUpdate:modelValue":i[0]||(i[0]=I=>O(r)?r.value=I:r=I)},null,8,te),[[M,n(r)]]),e("label",{for:`answer-${l.name+w}`},S(x.text),9,ne)]))),128))]),e("button",{class:"quze__btn",onClick:D,disabled:!n(r)}," Ответить ",8,ae)]))]),e("div",le,[ue,e("div",ie,[e("div",ce,[e("div",de,[e("div",{style:m({bottom:`${n(a).interest/24*100+10}px`}),class:h(["numbers-container",n(f)?"show":"hide"])},he,6),e("div",{class:h(["quze__progress-line",C.value]),style:m({height:`${n(a).interest/24*100}%`})},null,6)]),pe]),e("div",ge,[e("div",qe,[e("div",{style:m({bottom:`${n(a).engagement/33*100+10}px`}),class:h(["numbers-container",n(b)?"show":"hide"])},we,6),e("div",{class:h(["quze__progress-line",V.value]),style:m({height:`${n(a).engagement/33*100}%`})},null,6)]),ye]),e("div",ke,[e("div",xe,[e("div",{style:m({bottom:`${n(a).understanding/35*100+10}px`}),class:h(["numbers-container",n(z)?"show":"hide"])},Ce,6),e("div",{class:h(["quze__progress-line",Q.value]),style:m({height:`${n(a).understanding/35*100}%`})},null,6)]),Ve])])])]))}},Pe=E(Qe,[["__scopeId","data-v-ad85207d"]]);export{Pe as Q};
